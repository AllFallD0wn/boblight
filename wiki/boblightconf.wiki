#summary Explanation of the boblight.conf config file for boblightd.

= Introduction =

[boblightd] needs a config file so it knows what to do at startup, the default file it tries to open is /etc/boblight.conf.

= Details =

boblight.conf has 4 different type of sections: [boblightconf#global [global]], [boblightconf#device [device]], [boblightconf#color [color]] and [boblightconf#light [light]].

== global ==
A `[global]` section has two settings: interface and port.<br>
You can specify as many global settings as you want, although there's no point in having more than one.

Interface specifies where to bind the listening tcp socket, if interface is not specified boblightd will bind to all interfaces (INADDR_ANY) by default, for safety reasons you should bind to interface 127.0.0.1 if you don't plan to use boblight over a network.

Port specifies to which port the tcp socket will bind (who would have guessed), if no port is specified boblightd will bind to port 19333 by default.

Example `[global]` section:
{{{
[global]
interface 127.0.0.1
port      19333
}}}

== device ==

A `[device]` section specifies a device for boblightd, it has 9 settings:<br>

 * name<br>Specifies the name of the device, this setting is mandatory and must be unique (you can't have two devices with the same name).

 * type<br>Specifies the type of the device, this setting is mandatory.<br>Possible values are ltbl, momo, atmo, sound, popen and dioder.

 * output<br>Specifies where the device has its output, this setting is mandatory.<br>For ltbl, momo, atmo and dioder devices this is a serial port (/dev/ttyS0), for sound devices this is api:device (ALSA:default) and for popen devices this is something that can be executed (dd of=/dev/null).<br>This line is parsed from the first whitespace after the word output to the end of the line, including any comments and trailing whitespace!

 * channels<br>Specifies the number of channels the device has, this setting is mandatory.

 * interval<br>Specifies the update interval in microseconds for all device types except sound, this setting is mandatory for those devices.<br>A good value seems to be 20000 to update 50 times per second.<br>Clients can also request updates of the devices when they send light input so this value doesn't have to be very low to get good synchronization.

 * prefix<br>Specifies a prefix in hex sent before each burst of rgb information, this setting is optional and only applies to momo devices.

 * rate<br>Specifies the baudrate for momo, atmo, ltbl and dioder devices, specifies the samplerate for sound devices, this setting is mandatory for those devices.

 * period<br>Specifies the period in samples for sound devices, in other words how many samples are written per iteration, this setting is mandatory.<br>A good value for a samplerate of 48000 is 1024, this updates the output 46.875 times per second.

 * latency<br>Specifies the latency for sound devices in microseconds, this setting is optional.<br>If this is not specified the default portaudio low output latency is used (whatever that is, it seems pretty low anyway).

 * allowsync<br>Allows sync mode when a client requests it, this setting is optional, the default is on.<br>When sync mode is on, a device gets woken up immediately when a client sends input to a light that that device is using, this works quite well with clients like boblight-X11 and boblight-v4l because the light updates are exactly synchronized to the client's input.<br>However when a client updates too frequently or too many clients are using one device, the device's output can become constipated and all hell will break loose.<br>Sync mode can also be disabled in boblight-X11 or boblight-v4l by using the "-y off "flags.<br>Sync mode doesn't work with sound devices, they run synchronized to the soundcard and can't be woken up early.<br>

Example `[device]` sections:

{{{
#ltbl device with 3 channels on /dev/ttyUSB0, baudrate of 115k2 and updated 50 times per second (20000 microseconds, 1/50 seconds).

[device]
name 		device1
output		/dev/ttyUSB0
channels	3
type		ltbl
interval	20000
rate            115200
allowsync       on
}}}

{{{
#momo device with 12 channels, FF prefix and 19k2 baudrate

[device]
name 		device1
output		/dev/ttyACM0
channels	12
type		momo
interval	20000
prefix          FF
rate            19200
}}}

{{{
#popen device dumping everything to /dev/null

[device]
name 		device1
output		dd bs=1 > /dev/null 2>&1
channels	6
type		popen
interval	20000
}}}

{{{
#sound device using the default alsa output

[device]
name		device1
output		ALSA:default
channels	6
type		sound
latency		20000
period		1024
rate		48000
}}}

{{{
#ltbl device with 3 channels and 115k2 baudrate

[device]
name 		device1
output		/dev/ttyUSB0
channels	3
type		ltbl
interval	20000
rate            115200
}}}

{{{
#dioder device from http://cauldrondevelopment.com/blog/2009/12/29/a-real-ikea-dioder-hack/

[device]
name		device1
output		/dev/ttyUSB0
channels	3
type		dioder
interval	20000
rate		38400
}}}

== color ==
A `[color]` section specifies a color for boblightd, it has 5 settings:

 * name<br>Specifies the name of the color, this setting is mandatory and must be unique (you can't have two colors with the same name.

 * rgb<br>Specifies the rgb value of this color, this setting is mandatory, it's in RRGGBB hex format.

 * gamma<br>Specifies the gamma for this color, this setting is optional, the default is 1.0.

 * adjust<br>Specifies the adjust for this color, this setting is optional, the default is 1.0.<br>This is a multiplier for the channel this color is on, the ranges goes from 0.0 to 1.0.

 * blacklevel<br>Specifies the blacklevel for this color, this setting is optional, the default is 0.0.<br>This setting is a minimum value for the channel this color is on, the range goes from 0.0 to 1.0.

Example color sections:

{{{
[color]
name		red
rgb		FF0000

[color]
name		green
rgb		00FF00

[color]
name		blue
rgb		0000FF

[color]
name		yellow
rgb		FFFF00
adjust		0.5
blacklevel	0.1
gamma		2.3

[color]
name		white
rgb		FFFFFF
adjust		0.3
blacklevel	0.7
gamma		1.6
}}}

== light ==

A `[light]` section specifies a light for boblightd, it has 4 settings:

 * name<br>Specifies the name of this light, this setting is mandatory and must be unique (you can't have two lights with the same name).

 * color<br>Specifies a color on this light, this setting is optional, you can specify as many colors as this light has.<br>The synax is color colorname devicename devicechannel.<br>Example: color red device1 1

 * hscan<br>Specifies the horizontal scanrange for this light, this setting is optional, the default is 0.0 100.0<br>This setting only has an effect for clients that react to an image like boblight-X11 and boblight-v4l. The syntax is hscan begin end.<br>Begin and end specify the percentage of the horizontal range the light should react to. Example: hscan 0.0 50.0

 * vscan<br>Specifies the vertical scanrange for this light, same as hscan.

Example light sections:

{{{
[light]
name		right
color		red 	device1 1
color		green 	device1 2
color		blue 	device1 3
hscan		50 100
vscan		0 100

[light]
name		left
color		red     device1 4
color		green   device1 5
color		blue    device1 6
hscan		0 50
vscan		0 100

[light]
name		center
color		red     device1 7
color		green   device1 8
color		blue    device1 9
hscan		33.3 66.6
vscan		33.3 66.6

[light]
name		top
color		red     device1 7
color		green   device1 8
color		blue    device1 9
hscan		0.0 100.0
vscan		0.0 50.0
}}}

== example configuration files ==

{{{
#single light on a 3 channel ltbl device

[global]
interface	127.0.0.1

[device]
name 		device1
output		/dev/ttyUSB0
channels	3
type		ltbl
interval	20000
rate            115200

[color]
name		red
rgb		FF0000

[color]
name		green
rgb		00FF00

[color]
name		blue
rgb		0000FF

[light]
name		main
color		red     device1 1
color		green   device1 2
color		blue    device1 3
hscan		0 100
vscan		0 100
}}}

{{{
#two lights on a 12 channel momo device

[global]
interface	127.0.0.1

[device]
name 		device1
output		/dev/ttyACM0
channels	12
type		momo
interval	20000
prefix          FF
rate            19200

[color]
name		red
rgb		FF0000

[color]
name		green
rgb		00FF00

[color]
name		blue
rgb		0000FF

[light]
name		right
color		red 	device1 2
color		green 	device1 4
color		blue 	device1 6
hscan		50 100
vscan		0 100

[light]
name		left
color		red     device1 1
color		green   device1 3
color		blue    device1 5
hscan		0 50
vscan		0 100
}}}